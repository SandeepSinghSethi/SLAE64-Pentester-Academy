section .data
	str : db "Hello world",10,0
	strlen : equ $-str

section .text

global _start

proc1 :
	push rbp
	mov rbp,rsp

	mov rax,1
	mov dil,1
	mov rsi,[rsp+32]
	mov rdx,[rsp+24]
	syscall

	mov rsp,rbp
	pop rbp
	ret


_start:
	push str
	push strlen

	xor rcx,rcx
	mov cl,10

looped:
	push rcx
	call proc1
	pop rcx
	loop looped

	add rsp,16

	xor rax,rax
	mov al,60
	xor rdi,rdi
	syscall
